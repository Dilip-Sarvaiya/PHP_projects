var surplusconcert=surplusconcert||{};function surplusconcertDomReady(fn){if("function"==typeof fn)return"interactive"===document.readyState||"complete"===document.readyState?fn():void document.addEventListener("DOMContentLoaded",fn,!1)}function surplusconcertToggleAttribute(element,attribute,trueVal,falseVal){void 0===trueVal&&(trueVal=!0),void 0===falseVal&&(falseVal=!1),element.getAttribute(attribute)!==trueVal?element.setAttribute(attribute,trueVal):element.setAttribute(attribute,falseVal)}function surplusconcertFindParents(target,query){var parents=[];return function traverse(item){var parent=item.parentNode;parent instanceof HTMLElement&&(parent.matches(query)&&parents.push(parent),traverse(parent))}(target),parents}surplusconcert.createEvent=function(eventName){var event;return"function"==typeof window.Event?event=new Event(eventName):(event=document.createEvent("Event")).initEvent(eventName,!0,!1),event},surplusconcert.coverModals={init:function(){document.querySelector(".cover-modal")&&(this.onToggle(),this.outsideUntoggle(),this.closeOnEscape(),this.hideAndShowModals(),this.keepFocusInModal())},onToggle:function(){document.querySelectorAll(".cover-modal").forEach(function(element){element.addEventListener("toggled",function(event){var modal=event.target,body=document.body;modal.classList.contains("active")?body.classList.add("showing-modal"):(body.classList.remove("showing-modal"),body.classList.add("hiding-modal"),setTimeout(function(){body.classList.remove("hiding-modal")},500))})})},outsideUntoggle:function(){document.addEventListener("click",function(event){var target=event.target,modal=document.querySelector(".cover-modal.active");"a"===event.target.tagName.toLowerCase()&&event.target.hash.includes("#")&&null!==modal&&(this.untoggleModal(modal),setTimeout(function(){document.getElementById(event.target.hash.slice(1)).scrollIntoView()},550)),target===modal&&this.untoggleModal(target)}.bind(this))},closeOnEscape:function(){document.addEventListener("keydown",function(event){27===event.keyCode&&(event.preventDefault(),document.querySelectorAll(".cover-modal.active").forEach(function(element){this.untoggleModal(element)}.bind(this)))}.bind(this))},hideAndShowModals:function(){var _doc=document,_win=window,modals=_doc.querySelectorAll(".cover-modal"),htmlStyle=_doc.documentElement.style,adminBar=_doc.querySelector("#wpadminbar");function getAdminBarHeight(negativeValue){var height,currentScroll=_win.pageYOffset;return adminBar?(height=currentScroll+adminBar.getBoundingClientRect().height,negativeValue?-height:height):0===currentScroll?0:-currentScroll}function htmlStyles(){return{"overflow-y":_win.innerHeight>_doc.documentElement.getBoundingClientRect().height?"hidden":"scroll",position:"fixed",width:"100%",top:getAdminBarHeight(!0)+"px",left:0}}modals.forEach(function(modal){modal.addEventListener("toggle-target-before-inactive",function(event){var styles=htmlStyles(),offsetY=_win.pageYOffset,paddingTop=Math.abs(getAdminBarHeight())-offsetY+"px",mQuery=_win.matchMedia("(max-width: 600px)");event.target===modal&&(Object.keys(styles).forEach(function(styleKey){htmlStyle.setProperty(styleKey,styles[styleKey])}),_win.surplusconcert.scrolled=parseInt(styles.top,10),adminBar&&(_doc.body.style.setProperty("padding-top",paddingTop),mQuery.matches&&(offsetY>=getAdminBarHeight()?modal.style.setProperty("top",0):modal.style.setProperty("top",getAdminBarHeight()-offsetY+"px"))),modal.classList.add("show-modal"))}),modal.addEventListener("toggle-target-after-inactive",function(event){event.target===modal&&setTimeout(function(){var clickedEl=surplusconcert.toggles.clickedEl;modal.classList.remove("show-modal"),Object.keys(htmlStyles()).forEach(function(styleKey){htmlStyle.removeProperty(styleKey)}),adminBar&&(_doc.body.style.removeProperty("padding-top"),modal.style.removeProperty("top")),!1!==clickedEl&&(clickedEl.focus(),clickedEl=!1),_win.scrollTo(0,Math.abs(_win.surplusconcert.scrolled+getAdminBarHeight())),_win.surplusconcert.scrolled=0},500)})})},untoggleModal:function(modal){var modalTargetClass,modalToggle=!1;modal.dataset.modalTargetString&&(modalTargetClass=modal.dataset.modalTargetString,modalToggle=document.querySelector('*[data-toggle-target="'+modalTargetClass+'"]')),modalToggle?modalToggle.click():modal.classList.remove("active")},keepFocusInModal:function(){var _doc=document;_doc.addEventListener("keydown",function(event){var toggleTarget,modal,elements,menuType,bottomMenu,activeEl,lastEl,firstEl,tabKey,shiftKey,clickedEl=surplusconcert.toggles.clickedEl;clickedEl&&_doc.body.classList.contains("showing-modal")&&(toggleTarget=clickedEl.dataset.toggleTarget,modal=_doc.querySelector(toggleTarget),elements=modal.querySelectorAll("input, a, button"),elements=Array.prototype.slice.call(elements),".menu-modal"===toggleTarget&&(menuType=(menuType=window.matchMedia("(min-width: 992px)").matches)?".expanded-menu":".mobile-menu",(elements=elements.filter(function(element){return null!==element.closest(menuType)&&null!==element.offsetParent})).unshift(_doc.querySelector(".close-nav-toggle")),(bottomMenu=_doc.querySelector(".menu-bottom > nav"))&&bottomMenu.querySelectorAll("input, a, button").forEach(function(element){elements.push(element)})),".main-menu-modal"===toggleTarget&&(menuType=(menuType=window.matchMedia("(min-width: 1025px)").matches)?".expanded-menu":".mobile-menu",(elements=elements.filter(function(element){return null!==element.closest(menuType)&&null!==element.offsetParent})).unshift(_doc.querySelector(".close-main-nav-toggle")),(bottomMenu=_doc.querySelector(".menu-bottom > nav"))&&bottomMenu.querySelectorAll("input, a, button").forEach(function(element){elements.push(element)})),lastEl=elements[elements.length-1],firstEl=elements[0],activeEl=_doc.activeElement,tabKey=9===event.keyCode,!(shiftKey=event.shiftKey)&&tabKey&&lastEl===activeEl&&(event.preventDefault(),firstEl.focus()),shiftKey&&tabKey&&firstEl===activeEl&&(event.preventDefault(),lastEl.focus()))})}},surplusconcert.modalMenu={init:function(){this.expandLevel()},expandLevel:function(){document.querySelectorAll(".modal-menu").forEach(function(modalMenu){var activeMenuItem=modalMenu.querySelector(".current-menu-item");activeMenuItem&&surplusconcertFindParents(activeMenuItem,"li").forEach(function(element){var subMenuToggle=element.querySelector(".submenu-toggle");subMenuToggle&&surplusconcert.toggles.performToggle(subMenuToggle,!0)})})}},surplusconcert.toggles={clickedEl:!1,init:function(){this.toggle()},performToggle:function(element,instantly){var target,timeOutTime,classToToggle,self=this,_doc=document,toggle=element,targetString=toggle.dataset.toggleTarget;_doc.querySelectorAll(".show-modal").length||(self.clickedEl=_doc.activeElement),(target="next"===targetString?toggle.nextSibling:_doc.querySelector(targetString)).classList.contains("active")?target.dispatchEvent(surplusconcert.createEvent("toggle-target-before-active")):target.dispatchEvent(surplusconcert.createEvent("toggle-target-before-inactive")),classToToggle=toggle.dataset.classToToggle?toggle.dataset.classToToggle:"active",timeOutTime=0,target.classList.contains("cover-modal")&&(timeOutTime=10),setTimeout(function(){var focusElement,newTarget=target.classList.contains("sub-menu")?toggle.closest(".menu-item").querySelector(".sub-menu"):target,duration=toggle.dataset.toggleDuration;"slidetoggle"!==toggle.dataset.toggleType||instantly||"0"===duration?newTarget.classList.toggle(classToToggle):surplusconcertMenuToggle(newTarget,duration),"next"===targetString||target.classList.contains("sub-menu")?toggle.classList.toggle("active"):_doc.querySelector('*[data-toggle-target="'+targetString+'"]').classList.toggle("active"),surplusconcertToggleAttribute(toggle,"aria-expanded","true","false"),self.clickedEl&&-1!==toggle.getAttribute("class").indexOf("close-")&&surplusconcertToggleAttribute(self.clickedEl,"aria-expanded","true","false"),toggle.dataset.toggleBodyClass&&_doc.body.classList.toggle(toggle.dataset.toggleBodyClass),toggle.dataset.setFocus&&(focusElement=_doc.querySelector(toggle.dataset.setFocus))&&(target.classList.contains("active")?focusElement.focus():focusElement.blur()),target.dispatchEvent(surplusconcert.createEvent("toggled")),target.classList.contains("active")?target.dispatchEvent(surplusconcert.createEvent("toggle-target-after-active")):target.dispatchEvent(surplusconcert.createEvent("toggle-target-after-inactive"))},timeOutTime)},toggle:function(){var self=this;document.querySelectorAll("*[data-toggle-target]").forEach(function(element){element.addEventListener("click",function(event){event.preventDefault(),self.performToggle(element)})})}},surplusconcertDomReady(function(){surplusconcert.toggles.init(),surplusconcert.coverModals.init()});